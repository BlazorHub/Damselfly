
@inject ThemeService themeService
@inject IJSRuntime JsRuntime
@implements IDisposable

@code {
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            themeService.OnChangeCSS += SwitchTheme;
            SwitchTheme(themeService.ThemeCSS);
        }
    }

    public void Dispose()
    {
        themeService.OnChangeCSS -= SwitchTheme;
    }

    private void SwitchTheme(string newCSS)
    {
        _ = JsRuntime.InvokeAsync<string>("setStyleSheet", newCSS);
    }
}
